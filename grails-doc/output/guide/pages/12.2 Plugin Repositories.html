<html>
     <head>
     	<meta http-equiv="Content-type" content="text/html; charset=utf-8">
     	<title>12.2 Plugin Repositories</title>
     	<link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" title="Ref" charset="utf-8">
     </head>
	<body class="body">
		<h4>Distributing Plugins in Grails Plugins Repository</h4><p class="paragraph"/>The preferred way of plugin distributing is to publish it under Grails Plugins Repository. This will make your plugin visible to the <a href="../ref/Command Line/list-plugins.html" class="commandLine">list-plugins</a> command:<p class="paragraph"/><div class="code"><pre>grails list&#45;plugins</pre></div><p class="paragraph"/>Which lists all plugins in the Grails Plugin repository and also the <a href="../ref/Command Line/plugin-info.html" class="commandLine">plugin-info</a> command:<p class="paragraph"/><div class="code"><pre>grails plugin&#45;info &#91;plugin&#45;name&#93;</pre></div><p class="paragraph"/>Which outputs more information based on the meta info entered into the plug-in descriptor.<p class="paragraph"/><blockquote class="note">
If you have created a Grails plug-in and want it to be hosted in the central repository take a look at the wiki page <a href="http://grails.org/Creating+Plugins" target="blank"></a>, which details how to go about releasing your plugin in the repository.
</blockquote><p class="paragraph"/>When you have access to the Grails Plug-in repository to release your plugin you simply have to execute the <a href="../ref/Command Line/release-plugin.html" class="commandLine">release-plugin</a> command:<p class="paragraph"/><div class="code"><pre>grails release&#45;plugin</pre></div><p class="paragraph"/>This will automatically commit changes to SVN, do some tagging and make your changes available via the <a href="../ref/Command Line/list-plugins.html" class="commandLine">list-plugins</a> command.<p class="paragraph"/><h4>Configuring Additional Repositories</h4><p class="paragraph"/>By default when you use the <a href="../ref/Command Line/list-plugins.html" class="commandLine">list-plugins</a>, <a href="../ref/Command Line/install-plugin.html" class="commandLine">install-plugin</a> and <a href="../ref/Command Line/release-plugin.html" class="commandLine">release-plugin</a> command they work against the central repository hosted at http://plugins.grails.org.<p class="paragraph"/>However, Grails supports the notion of multiple plugin repositories. To configure multiple repositories you can using the <code>grails-app/conf/BuildConfig.groovy</code> file:<p class="paragraph"/><div class="code"><pre>grails.plugin.repos.discovery.myRepository=<span class="java&#45;quote">"http://svn.codehaus.org/grails/trunk/grails&#45;test&#45;plugin&#45;repo"</span> 
grails.plugin.repos.distribution.myRepository=<span class="java&#45;quote">"https://svn.codehaus.org/grails/trunk/grails&#45;test&#45;plugin&#45;repo"</span></pre></div><p class="paragraph"/>Repositories are split into those used for discovery over HTTP and those used for distribution, typically over HTTPS. You can also provide these settings in the <code>USER_HOME/.grails/settings.groovy</code> file if you prefer to share the same settings across multiple projects.<p class="paragraph"/>Once this is done the <a href="../ref/Command Line/list-plugins.html" class="commandLine">list-plugins</a>, <a href="../ref/Command Line/install-plugin.html" class="commandLine">install-plugin</a> and <a href="../ref/Command Line/plugin-info.html" class="commandLine">plugin-info</a> commands will automatically resolve against the newly configured repository. If you want to list only the plugins from the repository you can use its alias to do so:<p class="paragraph"/><div class="code"><pre>grails list&#45;plugins &#45;repository=myRepository</pre></div><p class="paragraph"/>Additionally, if you want to distribute a plugin within the configured repository you can do so with the <a href="../ref/Command Line/release-plugin.html" class="commandLine">release-plugin</a> command:<p class="paragraph"/><div class="code"><pre>grails release&#45;plugin &#45;repository=myRepository</pre></div><p class="paragraph"/><h4>Secured Plugin Repositories</h4><p class="paragraph"/>By default when using a repository URL starting with the <code>https://</code> protocol, Grails will prompt you for a username and password. If you prefer 
not to get these prompts then you can specify the username and password to use in your <code>~/.grails/settings.groovy</code> file as follows:<p class="paragraph"/><div class="code"><pre>grails.plugin.repos.discovery.myRepo=<span class="java&#45;quote">"https://user01:password01@myserver.com"</span></pre></div><p class="paragraph"/>The format is:<p class="paragraph"/><div class="code"><pre>PROTOCOL://USERNAME:PASSWORD@SERVER</pre></div><p class="paragraph"/>With this set Grails will use the specified username and password rather than prompting you for one.<p class="paragraph"/><h4>Configuring Repository Search Order</h4><p class="paragraph"/>A common use case for having your own plugin repository is when you want to override or provide a modified version of an existing plugin within the central repository.<p class="paragraph"/>However, by default Grails will search repository in a preset order. The repositories it will search are as follows:
<ul class="star">
<li><code>default</code> - The default repository found at <code>http://plugins.grails.org</code></li>
<li><code>core</code> - The repository for plugins provides by the framework (such as the hibernate plugin)</li>
</ul><p class="paragraph"/>If you add an additional repository then Grails will search the repository you have defined last, meaning it is not possible to override a plugin in the central repository unless you change the search order. To change the repository search order you can do the following:<p class="paragraph"/><div class="code"><pre>grails.plugin.repos.resolveOrder=&#91;'myRepository','<span class="java&#45;keyword">default</span>','core'&#93;</pre></div><p class="paragraph"/>In the above case the repository called <code>myRepository</code> will be searched before the default one. In addition, if you remove the built in repositories from the list you can prevent Grails from searching these repositories at all:<p class="paragraph"/><div class="code"><pre>grails.plugin.repos.resolveOrder=&#91;'myRepository'&#93;</pre></div><p class="paragraph"/>This is useful in a circumstance where you don't want Grails to perform any internet lookups when searching for plugins.
	</body>
</html>